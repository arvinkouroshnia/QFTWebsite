/*! feynman 2016-03-09 */
!function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){var d=a("./particles/Electron"),e=a("./particles/Photon"),f=a("./particles/Gluon"),g=a("./particles/Ghost");b.exports={getParticle:function(a){switch(a){case"electron":return d;case"photon":return e;case"gluon":return f;case"ghost":return g;default:return d}}}},{"./particles/Electron":12,"./particles/Ghost":13,"./particles/Gluon":14,"./particles/Photon":15}],2:[function(a,b,c){var d=a("./ParticleGenerator");b.exports=function(){function a(a,b,c){if("undefined"==typeof b)throw new Error("Missing canvas argument.");if("undefined"==typeof c)throw new Error("Missing data argument.");return this.canvasId=a,this.canvas=b,this.data=c,i.bind(this)(),j.bind(this)(),this}a.prototype.draw=function(){c.bind(this)(),e.bind(this)(),h.bind(this)(),g.bind(this)(),f.bind(this)()},a.prototype.getVertexById=function(a){var b;return this.data.vertices.forEach(function(c){c.id===a&&(b=c)}),b},a.prototype.getVerticesByDistance=function(a){var b=[];return this.data.vertices.forEach(function(c){c.distance===a&&b.push(c)}),b},a.prototype.getNumberOfLevels=function(){for(var a=0;this.getVerticesByDistance(a+1).length>0;)a++;return a},a.prototype.getControlPointById=function(a){var b;for(var c in this.data.cPoints)this.data.cPoints.hasOwnProperty(c)&&this.data.cPoints[c].forEach(function(c){c.id===a&&(b=c)});return b},a.prototype.getParticlesStartingFromPoint=function(a){return b.bind(this)("from",a)},a.prototype.getParticlesEndingInPoint=function(a){return b.bind(this)("to",a)};var b=function(a,b){var c=[];return this.data.particles.forEach(function(d){d[a]===b&&c.push(d)}),c},c=function(){this.canvas.size(this.data.width,this.data.height)},e=function(){var a=this.canvas.group(),b=a.text(this.data.title).font({family:"Georgia",size:12,style:"italic",anchor:"middle"});b.translate(this.data.width/2,this.data.height-30)},f=function(){var a=this.canvas.group(),b=this;for(var c in this.data.cPoints)this.data.cPoints.hasOwnProperty(c)&&this.data.cPoints[c].forEach(function(c){if(c.label){var d=b.data.width/2,e=b.data.height/2,f=c.x-d,g=c.y-e;f*=1.1,g*=1.1;var h=a.foreignObject().attr({id:c.id});h.appendChild("div",{id:"label-"+c.id,innerText:c.label}),h.move(d+f+c.labelX,e+g+c.labelY)}})},g=function(){var a=this.canvas.group();this.data.vertices.forEach(function(b){b.visible&&a.circle(6).fill("#000").translate(b.x-3,b.y-3)})},h=function(){this.canvas.group();this.data.particles.forEach(function(a){a.from=this.getVertexById(a.from)?this.getVertexById(a.from):this.getControlPointById(a.from),a.to=this.getVertexById(a.to)?this.getVertexById(a.to):this.getControlPointById(a.to),d.getParticle(a.type).draw(this.canvas,a)},this)},i=function(){for(var a in this.data.cPoints)if(this.data.cPoints.hasOwnProperty(a)){var b="left"===a||"right"===a?this.data.height:this.data.width,c="left"===a||"right"===a?this.data.width:this.data.height,d="left"===a||"right"===a?"x":"y",e="left"===a||"right"===a?"y":"x",f="right"===a||"bottom"===a?-1:1,g=1===this.data.cPoints[a].length?3:this.data.cPoints[a].length,h=.4*b/2,i=.6*b/(g-1),j=1===this.data.cPoints[a].length?1:0;this.data.cPoints[a].forEach(function(a){a[d]=-1===f?c-h:h,a[e]=j*i+h,a[d]+=Math.abs(b/2-a[e])*f*.1,j++})}},j=function(){m.bind(this)();for(var a=this.data.cPoints.left.length>0?this.data.width:this.data.height,b=this.data.cPoints.left.length>0?this.data.height:this.data.width,c=this.data.cPoints.left.length>0?"x":"y",d=this.data.cPoints.left.length>0?"y":"x",e=.15*a,f=.3*b,g=.7*a,h=.4*b,i=1;this.getVerticesByDistance(i).length>0;){var j=this.getVerticesByDistance(i),k=1===this.getNumberOfLevels()?2:this.getNumberOfLevels()+1,n=1===j.length?2:j.length-1,o=g/k,p=h/n,q=1===j.length?1:0;j.forEach(function(g){g[c]=o*i+e,g[d]=p*q+f,g[c]+=.1*(a/2-g[c]),g[d]+=.1*(b/2-g[d]),q++}),i++}l.bind(this)()},k=function(){var a={};return this.data.particles.forEach(function(b){a[b.to]=[],a[b.from]=[]}),this.data.particles.forEach(function(b){0!==b.tension&&(a[b.to].push(b.from),a[b.from].push(b.to))}),a},l=function(){var a=k.bind(this)(),b=this.data.cPoints.left.length>0?"left":"top",c=this,d=[],e=function(b,f,g){var h=c.getVertexById(b),i=g;if(h){if(h.sub)d.push(b);else{var j=1;d.forEach(function(a){var e=c.getVertexById(a);if(!e.start){var f=c.getVertexById(i)?c.getVertexById(i):c.getControlPointById(i),h=c.getVertexById(b);e.start=e.start?e.start:g,e.end=e.end?e.end:b;var k=Math.abs(h.x-f.x)/(d.length+1),l=Math.abs(h.y-f.y)/(d.length+1);e.x=f.x+k*j,e.y=f.y+l*j,j++}}),d=[],i=b}var k=a[b].filter(function(a){return a!==f&&(c.getControlPointById(a)||c.getVertexById(a)&&(!h.distance||!c.getVertexById(a).distance||c.getVertexById(a).distance>h.distance||c.getVertexById(a).sub))});k.forEach(function(a){e(a,b,i)})}else{var l=1;d.forEach(function(a){var e=c.getVertexById(a);if(!e.start){var f=c.getVertexById(i)?c.getVertexById(i):c.getControlPointById(i),h=c.getControlPointById(b);e.start=e.start?e.start:g,e.end=e.end?e.end:b;var j=Math.abs(h.x-f.x)/(d.length+1),k=Math.abs(h.y-f.y)/(d.length+1);e.x=f.x+j*l,e.y=f.y+k*l,l++}}),d=[]}};this.data.cPoints[b].forEach(function(b){a[b.id]&&a[b.id].forEach(function(a){e(a,b.id,b.id)})})},m=function(){var a=k.bind(this)(),b=this,c=function(d,e,f){var g=b.getVertexById(d);if(g){var h=1;g.sub?h=0:g.distance=g.distance?Math.min(g.distance,e):e;var i=a[d].filter(function(a){return a!==f&&b.getVertexById(a)&&(!b.getVertexById(a).distance||b.getVertexById(a).distance>g.distance)});i.forEach(function(a){c(a,e+h,d)})}},d=this.data.cPoints.left.length>0?"left":"top";this.data.cPoints[d].forEach(function(b){a[b.id]&&a[b.id].forEach(function(a){c(a,1)})})};return a}()},{"./ParticleGenerator":1}],3:[function(a,b,c){var d=a("./helpers/Klass");b.exports={getStructure:function(){return d.__clone({title:"",width:200,height:150,thickness:"thick",particles:[],vertices:[],cPoints:{left:[],right:[],top:[],bottom:[]}})}}},{"./helpers/Klass":6}],4:[function(a,b,c){b.exports={merge:function(a,b){"object"!=typeof a&&(a={});for(var c in b)if(b.hasOwnProperty(c)){var d=b[c];if("object"==typeof d){a[c]=this.merge(a[c],d);continue}void 0!==d&&(a[c]=d)}for(var e=2,f=arguments.length;f>e;e++)this.merge(a,arguments[e]);return a}}},{}],5:[function(a,b,c){var d=Math.PI,e=function(a){return"[object Array]"===Object.prototype.toString.call(a)};b.exports={normalizePathString:function(){for(var a,b="",c=0,d=arguments.length;d>c;c++)a=arguments[c],b+=" "+("number"!=typeof a?a:a.toFixed(3).replace(/(.\d*?)0+$/,"$1").replace(/\.$/,""));var e=b.trim();return e.replace(/ ?, ?/g,",")},getCoordinatesInBezier:function(a,b,c,d,e,f){var g=Math.atan2(d-b,c-a);return this.normalizePathString(e*Math.cos(g)-f*Math.sin(g)+a,",",e*Math.sin(g)+f*Math.cos(g)+b)},line:function(a,b,c){for(var d=["M"],f=Math.floor(c/b),g=c-b*f+.1,h=0;f>=h;h++)for(var i,j=0,k=a.length;k>j;j++)if(i=a[j],e(i)){if(!(f>h||i[0]<g))break;d.push(this.normalizePathString(i[0]+b*h,",",i[1]))}else d.push(i);return d.join(" ").replace(/\s[A-Z][^A-Z]*$/,"")},arc:function(a,b,c,f,g){for(var h=g?g:2,i=.25*h,j=Math.acos(-.5/i),k=-2*Math.asin(c/(i*f)),l=[],m=["M","0,0"],n=0;(d-2*j)/k>=n;n++)l.push([f*(i*Math.cos(k*n+j)+.5),f*(i*Math.sin(k*n+j)-Math.sqrt(i*i-.25))]);for(var o,p=0,q=l.length-1;q>p;p++){o="photon"===a?b[p%2]:b;for(var r,s=0,t=o.length;t>s;s++)r=o[s],m.push(e(r)?this.getCoordinatesInBezier(l[p][0],l[p][1],l[p+1][0],l[p+1][1],r[0],r[1]):r)}return m.join(" ").replace(/\s[A-Z]$/,"")},loop:function(a,b,c,f){for(var g=!0,h=2*Math.asin(2*c/f),i=2*d/h,j=[],k=g?-.5:.5,l=["M","gluon"===a?k+",0":"0,"+k],m=-.1,n=f;Math.floor(i)%4||i-Math.floor(i)>.1;m+=.001)f=(1+m)*n,h=2*Math.asin(2*c/f),i=2*d/h;for(var o=0;i>=o;o++){var p=.5*f*(1-Math.cos(h*o)),q=.5*f*Math.sin(h*o);j.push([p,q])}for(var r,s=0,t=j.length-1;t>s;s++){r="photon"===a?b[s%2]:b;for(var u,v=0,w=r.length;w>v;v++)u=r[v],l.push(e(u)?this.getCoordinatesInBezier(j[s][0],j[s][1],j[s+1][0],j[s+1][1],u[0],u[1]):u)}return l.join(" ").replace(/\s[A-Z]$/,"")+" Z"}}},{}],6:[function(a,b,c){var d={}.hasOwnProperty;b.exports={__extends:function(a,b){function c(){this.constructor=a}for(var e in b)d.call(b,e)&&(a[e]=b[e]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a},__clone:function(a){if(null==a||"object"!=typeof a)return a;var b=a.constructor();for(var c in a)a.hasOwnProperty(c)&&(b[c]=a[c]);return b}}},{}],7:[function(a,b,c){b.exports=function(a,b,c){var d=a.foreignObject().attr({id:b.id});d.appendChild("span",{id:"label-"+b.id,innerText:b.label});var e=document.getElementById("label-"+b.id);if(e){e.style.textAlign="center";var f=b.to.x-b.from.x,g=b.to.y-b.from.y,h=Math.sqrt(f*f+g*g);f/=h*(1/b.labelDistance),g/=h*(1/b.labelDistance);var i=-g+(b.to.x+b.from.x)/2,j=f+(b.to.y+b.from.y)/2,k=g+(b.to.x+b.from.x)/2,l=-f+(b.to.y+b.from.y)/2,m=NaN!==b.labelX?b.labelX:0,n=NaN!==b.labelY?b.labelY:0;return"left"===b.labelSide?d.move(i+m,j+n):d.move(k+m,l+n),d}}},{}],8:[function(a,b,c){b.exports={getAngle:function(a,b,c){var d=c?1:180/Math.PI,e=b.x-a.x,f=b.y-a.y;return Math.atan2(f,e)*d},getDistance:function(a,b){var c=b.x-a.x,d=b.y-a.y;return Math.sqrt(c*c+d*d)},getPositionValues:function(a,b){var c=this.getAngle(a,b),d=this.getDistance(a,b);return{x:a.x,y:a.y,r:c,l:d}}}},{}],9:[function(a,b,c){var d=a("./parsers/ParserFactory"),e=a("./Stage");b.exports=function(){function a(a){var b={},c=a.textContent,d=document.createElement("pre"),e=document.createElement("figure");d.style.display="none",d.textContent=c,d.className="feynmanjs-data",e.className="feynmanjs-figure",a.textContent="",a.appendChild(d),a.appendChild(e);try{b=JSON.parse(c),this.draw(e,b)}catch(f){console.error(f)}}var b=function(){var b=document.getElementsByClassName("feynmanjs");return[].forEach.call(b,a,this),this};return b.prototype.draw=function(a,b){if("undefined"==typeof a)throw new Error("Missing canvas#id argument!");if("undefined"==typeof b)throw new Error("Missing data argument!");var c=new SVG(a),f=d.getParser(b),g=f.parse(),h=new e(a,c,g);return h.draw(),this},window.Feynman=b,b}()},{"./Stage":2,"./parsers/ParserFactory":11}],10:[function(a,b,c){var d=a("./../StageStructure");a("./../helpers/Klass");b.exports=function(){function a(a){if("undefined"==typeof a)throw new Error("No data given.");return this.raw=a,b=d.getStructure(),this}var b;a.prototype.parse=function(){return this.raw.title&&(b.title=this.raw.title),this.raw.width&&(b.width=this.raw.width),this.raw.height&&(b.height=this.raw.height),this.raw.diagram&&this.raw.diagram.forEach(function(a){c(a)}),b};var c=function(a){var b=a.match(/\w+/g)[0],c=a.match(/\{([^{}]+)\}|\{(\$[\S]+\$)\}|\{\S+(\$[\S]+\$)\}/g),d=w(v(c,b));void 0!==b&&void 0!==B[b]&&B[b](d)},e=function(a){for(var c=0;a[1][c+1];){var d=a[1][c],e=a[1][c+1],f="p"+(b.particles.length+1);u(d),u(e);var g=y(a[0].slice(1)),h=0,i=0;g.right&&(h="string"==typeof g.right?parseFloat(g.right):1),g.left&&(i="string"==typeof g.left?parseFloat(g.left):1);var j={id:f,from:d,to:e,type:a[0][0],label:g.label,labelSide:g.side,labelDistance:g.dist,labelX:g.labelx?parseInt(g.labelx):0,labelY:g.labely?parseInt(g.labely):0,tension:parseFloat(g.tension),right:h,left:i,tag:g.tag,color:g.foreground,bgColor:g.background,penWidth:g.width};b.particles.push(j),c++}},f=function(a,c){c[0].forEach(function(c){A(c)||b.cPoints[a].push({id:c,x:0,y:0,side:a})})},g=function(a){f("right",a)},h=function(a){f("left",a)},i=function(a){f("top",a)},j=function(a){f("bottom",a)},k=function(a,b){for(var c=parseInt(b[0],10),d=[],e=1,g="left"===a||"top"===a?"i":"o";c>=e;)d.push(g+e),e++;f(a,[d])},l=function(a){k("right",a)},m=function(a){k("left",a)},n=function(a){k("top",a)},o=function(a){k("bottom",a)},p=function(a){a[0].forEach(function(a){var b=z(a);b&&(b.visible=!0)})},q=function(a){("thick"===a[0][0]||"thin"===a[0][0])&&(b.thickness=a[0][0])},r=function(a){var b=z(a[0][0]);if(b||(b=A(a[0][0])),b){var c=y(a[0].slice(1));b.labelX=c.labelx?parseInt(c.labelx):0,b.labelY=c.labely?parseInt(c.labely):0,b.label=a[1][0]}},s=function(a){return"v"===a[0]},t=function(a){return/\*/.test(a)},u=function(a){if(s(a)&&!z(a)){var c={id:a};t(a)&&(c.sub=!0),b.vertices.push(c)}},v=function(a){var b=/^\{|\}$/gm;return a.map(function(a){return a.replace(b,"")})},w=function(a,b){var c=[];return a.forEach(function(a){for(var b=new RegExp(/([\w.]+|\$[\S,]?\S+\$)=?(\$[\S\ ]*,?[\S\ ]*\$|[\w.*-]+|#\w+)?/g),d=b.exec(a),e=[];null!==d;)e.push(d[0]),d=b.exec(a);c.push(x(e))}),c},x=function(a){var b=[];return a.forEach(function(a){var c=a,d=/(\w+)\=(\S+)/g,e=d.exec(c);if(e&&e.length>2){var f=e[1],g=e[2];c={},c[f]=g}b.push(c)}),b},y=function(a){var b={};return a&&0===a.length?b:(a.forEach(function(a){if("string"==typeof a&&(b[a]=!0),"object"==typeof a){var c=Object.keys(a)[0];b[c]="undefined"==typeof a[c]?!0:a[c]}}),b)},z=function(a){var c;return b.vertices.forEach(function(b){b.id===a&&(c=b)}),c},A=function(a){var c;for(var d in b.cPoints)b.cPoints.hasOwnProperty(d)&&b.cPoints[d].forEach(function(b){b.id===a&&(c=b)});return c},B={fmf:e,fmfbottom:j,fmfbottomn:o,fmfdot:p,fmflabel:r,fmfleft:h,fmfleftn:m,fmfpen:q,fmfright:g,fmfrightn:l,fmftop:i,fmftopn:n};return a}()},{"./../StageStructure":3,"./../helpers/Klass":6}],11:[function(a,b,c){var d=a("./LatexParser");b.exports={getParser:function(a){switch(a.lang){default:return new d(a)}}}},{"./LatexParser":10}],12:[function(a,b,c){var d=a("./../helpers/Point"),e=a("./../helpers/Array"),f=a("./../helpers/Bezier"),g=a("./../helpers/Label"),h={type:"electron",from:{x:0,y:0},to:{x:0,y:0},label:"",right:!1,left:!1,tension:1,tag:"",color:"#333",bgColor:null,penWidth:2.5,labelSide:"right",labelDistance:10};b.exports={draw:function(a,b){if(a){var c={};e.merge(c,h),e.merge(c,b);var f=a.group(),i=d.getPositionValues(b.from,b.to),j=d.getAngle(c.from,c.to,!0),k="line",l=!0,m=2;if((b.left||b.right)&&(k="arc",l=0!==b.right?-1:1,m=0!==b.right?b.right:b.left),"plain"!==b.type&&this._drawArrow(f,i.l,b.color?b.color:h.color,"antifermion"===b.type),c.label){new g(a,c,j)}return f.path(this.getPath(k,b,m)).fill("none").stroke({width:b.penWidth?b.penWidth:h.penWidth,color:b.color?b.color:h.color}).scale(1,l),f.transform({cx:i.x,cy:i.y,rotation:i.r,x:i.x,y:i.y}),f}},getPath:function(a,b,c){var e=d.getPositionValues(b.from,b.to),g=e.l,h=[[1,1],[2,1]];switch(a){case"line":return f.line(h,1,g);case"arc":return f.arc("electron",h,1,g,c);case"loop":return f.loop("electron",h,1,g);default:return f.line(h,1,g)}},_drawArrow:function(a,b,c,d){var e=d?-1:1,f=b/2+10*e,g=1.2,h=b/2-10*e,i=6.5,j=b/2-10*e,k=-4.5,l=""+f+","+g+" "+h+","+i+" "+j+","+k;a.polygon(l).fill(c)}}},{"./../helpers/Array":4,"./../helpers/Bezier":5,"./../helpers/Label":7,"./../helpers/Point":8}],13:[function(a,b,c){var d=a("./../helpers/Point"),e=a("./../helpers/Array"),f=a("./../helpers/Bezier"),g=a("./../helpers/Label"),h={type:"ghost",from:{x:0,y:0},to:{x:0,y:0},label:"",right:!1,left:!1,tension:1,tag:"",color:"#333",bgColor:null,penWidth:2.5,labelSide:"right",labelDistance:10};b.exports={draw:function(a,b){if(a){var c={};e.merge(c,h),e.merge(c,b);var f=a.group(),i=d.getPositionValues(b.from,b.to),j=d.getAngle(c.from,c.to,!0),k="line",l=!0,m=2;if((b.left||b.right)&&(k="arc",l=0!==b.right?-1:1,m=0!==b.right?b.right:b.left),this._drawArrow(f,i.l,b.color?b.color:h.color),c.label){new g(a,c,j)}return f.path(this.getPath(k,b,m)).fill("none").stroke({width:b.penWidth?b.penWidth:h.penWidth,color:b.color?b.color:h.color}).attr({"stroke-dasharray":"4,4"}).scale(1,l),f.transform({cx:i.x,cy:i.y,rotation:i.r,x:i.x,y:i.y}),f}},getPath:function(a,b,c){var e=d.getPositionValues(b.from,b.to),g=e.l,h=[[1,1],[2,1]];switch(a){case"line":return f.line(h,1,g);case"arc":return f.arc("ghost",h,1,g,c);case"loop":return f.loop("ghost",h,1,g);default:return f.line(h,1,g)}},_drawArrow:function(a,b,c,d){var e=d?-1:1,f=b/2+10*e,g=1.2,h=b/2-10*e,i=6.5,j=b/2-10*e,k=-4.5,l=""+f+","+g+" "+h+","+i+" "+j+","+k;a.polygon(l).fill(c)}}},{"./../helpers/Array":4,"./../helpers/Bezier":5,"./../helpers/Label":7,"./../helpers/Point":8}],14:[function(a,b,c){var d=a("./../helpers/Point"),e=a("./../helpers/Array"),f=a("./../helpers/Bezier"),g=a("./../helpers/Label"),h={type:"gluon",from:{x:0,y:0},to:{x:0,y:0},label:"",right:!1,left:!1,tension:1,tag:"",color:"#009933",bgColor:null,penWidth:2.5,labelSide:"right",labelDistance:10};b.exports={draw:function(a,b){if(a){var c={};e.merge(c,h),e.merge(c,b);var f=a.group(),i=d.getPositionValues(c.from,c.to),j=d.getAngle(c.from,c.to,!0),k="line",l=!0,m=2;if((c.left||c.right)&&(k="arc",l=0!==c.right?-1:1,m=0!==c.right?c.right:c.left),c.label){new g(a,c,j)}return f.path(this.getPath(k,c,m)).fill("none").stroke({width:c.penWidth?c.penWidth:h.penWidth,color:c.color?c.color:h.color}).scale(1,l),f.transform({cx:i.x,cy:i.y,rotation:i.r,x:i.x,y:i.y}),f}},getPath:function(a,b,c){var e=d.getPositionValues(b.from,b.to),g=e.l+(5-e.l%5),h={width:13,height:13,factor:.75,percent:.6,scale:1.15},i=.55191502,j=h.height*h.factor,k=h.width*h.percent,l=h.height*(h.factor-.5),m=h.width*(1-h.percent),n=!0,o=n?[[0,0],"A "+j+" "+k,0,0,1,[j,k],"A "+l+" "+m,0,1,1,[j-2*l,k],"A "+j+" "+k,0,0,1]:[[0,0],"A "+j+" "+k,0,0,0,[j,-k],"A "+l+" "+m,0,1,0,[j-2*l,-k],"A "+j+" "+k,0,0,0];j=n?j:h.scale*j;var p=j/Math.pow(g,.6),q=n?["C",[i*j,p],[j,k-i*k],[j,k],"C",[j,k+i*m],[j-l+i*l,k+m],[j-l,k+m],"S",[j-2*l,k+i*m],[j-2*l,k],"C",[j-2*l,k-i*k],[2*(j-l)-i*j,0],[2*(j-l),-p]]:["C",[i*j,p],[j,-k+i*k],[j,-k],"C",[j,-k-i*m],[j-l+i*l,-k-m],[j-l,-k-m],"S",[j-2*l,-k-i*m],[j-2*l,-k],"C",[j-2*l,-k+i*k],[2*(j-l)-i*j,0],[2*(j-l),-p]];switch(a){case"line":return f.line(o,h.height,g);case"arc":return f.arc("gluon",q,j-l,g,c);case"loop":return f.loop("gluon",q,j-l,g);default:return f.line(o,h.height,g)}}}},{"./../helpers/Array":4,"./../helpers/Bezier":5,"./../helpers/Label":7,"./../helpers/Point":8}],15:[function(a,b,c){var d=a("./../helpers/Point"),e=a("./../helpers/Array"),f=a("./../helpers/Bezier"),g=a("./../helpers/Label"),h={type:"photon",from:{x:0,y:0},to:{x:0,y:0},label:"",right:!1,left:!1,tension:1,tag:"",color:"#0066FF",bgColor:null,penWidth:2.5,labelSide:"right",labelDistance:15};b.exports={draw:function(a,b){if(a){var c={};e.merge(c,h),e.merge(c,b);var f=a.group(),i=d.getPositionValues(c.to,c.from),j=d.getAngle(c.from,c.to,!0),k="line",l=1,m=2;if((c.left||c.right)&&(k="arc",l=0!==c.right?-1:1,m=0!==c.right?c.right:c.left),c.label){new g(a,c,j)}return f.path(this.getPath(k,c,m)).fill("none").stroke({width:c.penWidth?c.penWidth:h.penWidth,color:c.color?c.color:h.color}).scale(1,l),f.transform({cx:i.x,cy:i.y,rotation:i.r,x:i.x,y:i.y}),f}},getPath:function(a,b,c){var e=d.getPositionValues(b.from,b.to),g=e.l,h=Math.PI,i=.51128733,j=2,k=.5*i*j,l=3,m=2*l/h,n=i*l/h,o=!0,p=o?[[0,0],"C",[n,-k],[m,-j],[l,-j],"S",[2*l-n,-k],[2*l,0],"S",[2*l+m,j],[3*l,j],"S",[4*l-n,k]]:[[0,0],"C",[n,k],[m,j],[l,j],"S",[2*l-n,k],[2*l,0],"S",[2*l+m,-j],[3*l,-j],"S",[4*l-n,-k]],q=o?[["C",[n,-k],[m,-j],[l,-j],"S",[2*l-n,-k],[2*l+.5,0]],["C",[n,k],[m,j],[l,j],"S",[2*l-n,-k],[2*l-.5,0]]]:[["C",[n,k],[m,j],[l,j],"S",[2*l-n,k],[2*l-.5,0]],["C",[n,-k],[m,-j],[l,-j],"S",[2*l-n,-k],[2*l+.5,0]]];switch(a){case"line":return f.line(p,4*l,g);case"arc":return f.arc("photon",q,l,g,c);case"loop":return f.loop("photon",q,l,g);default:return f.line(p,4*l,g)}}}},{"./../helpers/Array":4,"./../helpers/Bezier":5,"./../helpers/Label":7,"./../helpers/Point":8}]},{},[9]);